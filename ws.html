<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input type="text" id="input" placeholder="Messageâ€¦" />
<hr />
<pre id="output"></pre>

<script>
    var host   = 'ws://control.local:8080/';
    var socket = null;
    var input  = document.getElementById('input');
    var output = document.getElementById('output');
    var print  = function (message) {
        var samp       = document.createElement('samp');
        samp.innerHTML = message + '\n';
        output.appendChild(samp);

        return;
    };

    input.addEventListener('keyup', function (evt) {
        if (13 === evt.keyCode) {
            var msg = input.value;

            if (!msg) {
                return;
            }

            try {
                socket.send(msg);
                input.value = '';
                input.focus();
            } catch (e) {
                console.log(e);
            }

            return;
        }
    });

    try {
        socket = new WebSocket(host);

        console.log(socket);

        socket.onopen = function () {

            socket.send('channel');

            print('connection is opened');
            input.focus();

            return;
        };
        socket.onmessage = function (msg) {
            print(msg.data);

            return;
        };
        socket.onerror = function () {
            console.log(this);
        };
        socket.onclose = function () {
            print('connection is closed');

            return;
        };
    } catch (e) {
        console.log(e);
    }
</script>
</body>
</html>